<!DOCTYPE html>
<html>

<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');
    </style>
    <title>
        {% if page.title %}{{ page.title }} - {% endif %}{{ config.site_name
        }}
    </title>
    <link rel="stylesheet" href="dist.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/relativeTime.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/utc.js"></script>
    <script>
        dayjs.extend(window.dayjs_plugin_utc);
        dayjs.extend(window.dayjs_plugin_relativeTime);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body class="bg-zinc-50">
    <nav class="bg-emerald-700 sticky top-0 bg-opacity-90 backdrop-blur-sm z-40">
        <div class="mx-auto flex items-center p-4 space-x-6 flex-wrap justify-between">
            <p class="text-xl lg:text-3xl font-thin lg:pl-32 self-center text-white">
                view.py
                <span class="font-bold">docs</span>
            </p>
            <button onclick="toggleNav()" type="button"
                class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-white bg-emerald-700 rounded-lg lg:hidden hover:opacity-50 transition-all"
                aria-controls="navbar" aria-expanded="false">
                <!-- i stole this -->
                <span class="sr-only">Open main menu</span>
                <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 17 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M1 1h15M1 7h15M1 13h15" />
                </svg>
            </button>
        </div>
    </nav>

    <div class="flex">
        <div class="rounded bg-zinc-100 p-4 w-1/6 lg:block hidden">
            {% if nav|length>1 %}
            <div>
                {% for nav_item in nav %} {% if nav_item.children %}
                <div class="py-4">
                    <p class="text-center font-bold text-lg">
                        {{ nav_item.title }}
                    </p>
                    <hr />
                    <div class="flex flex-col space-y-1">
                        {% for nav_item in nav_item.children %}
                        <div
                            class="rounded {% if nav_item.active %}bg-emerald-200{% endif %} p-1 flex items-center justify-center">
                            <a href="{{ nav_item.url|url }}" class="text-black">{{ nav_item.title }}</a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <div
                    class="rounded {% if nav_item.active %}bg-zinc-200{% endif %} p-1 flex items-center justify-center">
                    <a href="{{ nav_item.url|url }}" class="text-black">{{ nav_item.title }}</a>
                </div>
                {% endif %} {% endfor %}
            </div>
            {% endif %}
        </div>
        <div class="p-8 lg:pl-32 lg:w-2/3 w-full">
            <div class="flex flex-col lg:flex-row w-full">
                <div class="self-center">
                    <a class="self-center text-emerald-600 p-2 " href="{{ page.edit_url }}">
                        Edit on GitHub
                    </a>
                </div>
                <div class="lg:ml-auto self-center">
                    <p class="font-thin text-black">
                        Last edited
                        <span id="dayjs-target">{{ build_date_utc }}</span>
                    </p>
                </div>
            </div>
            <hr />
            {{ page.content }}
            <div class="py-4">
                <hr class="w-full border-t border-zinc-200" />
            </div>
            <div class="flex pt-3">
                {% if page.previous_page %}
                <div class="flex space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-6 h-6 text-sky-600">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
                    </svg>

                    <a href="/{{ page.previous_page.url }}">{{ page.previous_page.title }}</a>
                </div>
                {% endif %} {% if page.next_page %}
                <div class="ml-auto self-center flex space-x-2">
                    <a href="/{{ page.next_page.url }}">{{ page.next_page.title }}</a>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-6 h-6 text-sky-600">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3" />
                    </svg>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="lg:w-1/3 lg:block hidden">
            <div class="px-4 py-4 break-words h-screen pr-8">
                <div
                    class="rounded p-4 bg-zinc-100 drop-shadow-xl h-3/4 flex flex-col space-y-3 border-zinc-100 border-2">
                    {% for toc_item in page.toc %}
                    <div class="flex flex-col space-y-3">
                        <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>

                        {% for toc_item in toc_item.children %}
                        <div class="indent-4 flex flex-col space-y-3">
                            <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>
                            {% for toc_item in toc_item.children %}
                            <div class="indent-8 flex flex-col space-y-3">
                                <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>
                                {% for toc_item in toc_item.children %}
                                <div class="indent-12 flex flex-col space-y-3">
                                    <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>
                                </div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="w-full h-screen z-30 hidden sticky top-0 pt-16" id="small-nav">
            <div class="py-4 px-4">
                <div class="rounded bg-zinc-100 drop-shadow-xl p-2">
                    {% if nav|length>1 %}
                    <div>
                        {% for nav_item in nav %} {% if nav_item.children %}
                        <div class="py-8">
                            <p class="text-center font-bold text-lg">
                                {{ nav_item.title }}
                            </p>
                            <div class="py-2">
                                <hr class="w-full border-t border-zinc-300" />
                            </div>
                            <div class="flex flex-col space-y-1">
                                {% for nav_item in nav_item.children %}
                                <div class="rounded {% if nav_item.active %}bg-zinc-200{% endif %} p-1">
                                    <a href="{{ nav_item.url|url }}" class="text-black">{{ nav_item.title }}</a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="rounded {% if nav_item.active %}bg-zinc-200{% endif %} p-1">
                            <a href="{{ nav_item.url|url }}" class="text-black">{{ nav_item.title }}</a>
                        </div>
                        {% endif %} {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="w-screen h-screen z-40 absolute hidden" id="small-toc">
            <div class="px-4 py-4 break-words h-screen">
                <div class="rounded p-4 bg-zinc-100 drop-shadow-xl h-3/4 flex flex-col space-y-3">
                    {% for toc_item in page.toc %}
                    <div class="flex flex-col space-y-3">
                        <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>

                        {% for toc_item in toc_item.children %}
                        <div class="indent-8 flex flex-col space-y-3">
                            <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>
                            {% for toc_item in toc_item.children %}
                            <div class="indent-16 flex flex-col space-y-3">
                                <a href="{{ toc_item.url }}">{{ toc_item.title }}</a>
                            </div>
                            {% endfor %}
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <script>
        hljs.highlightAll();

        let e = document.getElementById("dayjs-target");
        e.innerHTML = dayjs.utc(e.innerHTML).local().fromNow();

        let openedNav = false;
        let openedToc = false;
        let nav = document.getElementById("small-nav");
        let toc = document.getElementById("small-toc");

        function toggleNav() {
            toc.classList.add("hidden");
            openedToc = false;
            openedNav = !openedNav;

            if (openedNav) {
                nav.classList.remove("hidden");
            } else {
                nav.classList.add("hidden");
            }
        }

        function toggleToc() {
            nav.classList.add("hidden");
            openedNav = false;
            openedToc = !openedToc;

            if (openedToc) {
                toc.classList.remove("hidden");
            } else {
                toc.classList.add("hidden");
            }
        }

        document.querySelectorAll("hr").forEach(hr => {
            const wrapper = document.createElement("div");
            wrapper.classList.add("divider");
            hr.parentNode.replaceChild(wrapper, hr);
            wrapper.appendChild(hr);
        })
    </script>
</body>

</html>
